{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wojtek/Downloads/todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import Cookies from'universal-cookie';import login from'./img/log.png';import add from'./img/add.png';import'./TaskAdd.sass';var cookies=new Cookies();var TaskAdd=/*#__PURE__*/function(_Component){_inherits(TaskAdd,_Component);var _super=_createSuper(TaskAdd);function TaskAdd(){var _this;_classCallCheck(this,TaskAdd);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.getDate=function(){var time=new Date();var date=time.getFullYear()+'-';if(time.getMonth()<10)date+='0';date+=time.getMonth()+1;date+='-';if(time.getDate()<10)date+='0';date+=time.getDate();return date;};_this.state={title:'',date:_this.getDate(),priority:1,email:'',login:'',pass:'',confPass:''};_this.handleBtn=function(){if(cookies.get('login'))return'Log out';else return'Log in';};_this.updateDatabase=function(props){var tasks=props;var response=fetch('/updatetask',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tasks:tasks,user:cookies.get('user')})});};_this.handleLoginBtn=function(){if(cookies.get('login')){cookies.remove('login');cookies.remove('tasks');cookies.remove('user');cookies.remove('start');window.location.reload();}else if(document.querySelector('.login').style.display==='block'){document.querySelector('.login').style.display='none';document.querySelector('.register').style.display='none';document.querySelector('.login-first').style.display='none';document.querySelector('.startpage-mobile').style.display='none';document.querySelector('.forgot-pass').style.display='none';}else{document.querySelector('.login').style.display='block';document.querySelector('.register').style.display='none';document.querySelector('.login-first').style.display='none';document.querySelector('.startpage-mobile').style.display='none';document.querySelector('.forgot-pass').style.display='none';}};_this.handleRegisterBtn=function(){document.querySelector('.login').style.display='none';document.querySelector('.register').style.display='block';document.querySelector('.login-first').style.display='none';document.querySelector('.startpage-mobile').style.display='none';document.querySelector('.forgot-pass').style.display='none';};_this.handleForgotBtn=function(){document.querySelector('.login').style.display='none';document.querySelector('.register').style.display='none';document.querySelector('.login-first').style.display='none';document.querySelector('.startpage-mobile').style.display='none';document.querySelector('.forgot-pass').style.display='block';};_this.handleTryBtn=function(){document.querySelector('.startpage-mobile').style.display='none';};_this.handleTitleChange=function(e){_this.setState({title:e.target.value});document.querySelector('.addErr').innerHTML='';};_this.handleDateChange=function(e){_this.setState({date:e.target.value});document.querySelector('.addErr').innerHTML='';};_this.handlePriorityChange=function(props){document.querySelector('.priorityCircleGrey').style.backgroundColor='rgba(0,0,0,0)';document.querySelector('.priorityCircleBlue').style.backgroundColor='rgba(0,0,0,0)';document.querySelector('.priorityCircleRed').style.backgroundColor='rgba(0,0,0,0)';if(props===1)document.querySelector('.priorityCircleGrey').style.backgroundColor='#8D8D8D';else if(props===2)document.querySelector('.priorityCircleBlue').style.backgroundColor='#4D57FF';else if(props===3)document.querySelector('.priorityCircleRed').style.backgroundColor='#FF5E5A';_this.setState({priority:props});};_this.handleEmailChange=function(e){_this.setState({email:e.target.value});};_this.handleLoginChange=function(e){_this.setState({login:e.target.value});};_this.handlePassChange=function(e){_this.setState({pass:e.target.value});};_this.handlePassRepeatChange=function(e){_this.setState({confPass:e.target.value});};_this.handleSubmit=function(){var data={title:_this.state.title,date:_this.state.date,priority:_this.state.priority,done:false};var txt=document.querySelector('.addErr');txt.innerHTML='';if(data.title<3)txt.innerHTML='Task must have at least 3 letters!';else{var t1=new Date().getTime();var t2=new Date(data.date).getTime();var t3=t2-t1+86400000;if(t3<0)txt.innerHTML='Date cannot be from the past!';else{var tasks=cookies.get('tasks')||[];var taskExist=false;tasks.map(function(task){if(task.title===data.title){txt.innerHTML='Task with such name already exists!';taskExist=true;}});if(taskExist===false){tasks.push(data);cookies.set('tasks',tasks);_this.updateDatabase(tasks);_this.setState({name:'',date:_this.getDate()});txt.innerHTML='';window.location.reload();}}}};_this.handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var email,pass,errField,errFField,response,answer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=_this.state.email;pass=_this.state.pass;errField=document.querySelector('.logErr');errFField=document.querySelector('.firstLogErr');if(!(email.length<6)){_context.next=9;break;}errField.innerText='Too short email!';errFField.innerText='Too short email!';_context.next=34;break;case 9:if(email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)){_context.next=14;break;}errField.innerText='Incorrect email!';errFField.innerText='Incorrect email!';_context.next=34;break;case 14:if(true){_context.next=19;break;}errField.innerText='Incorrect password';errFField.innerText='Incorrect password';_context.next=34;break;case 19:errField.innerText='';errFField.innerText='';_context.next=23;return fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,pass:pass})});case 23:response=_context.sent;_context.next=26;return response.text();case 26:answer=_context.sent;answer=JSON.parse(answer);errField.innerText=answer.info;cookies.set('login',answer.login);cookies.set('user',answer.user);_this.setState({email:'',pass:''});if(answer.tasks)cookies.set('tasks',answer.tasks);window.location.reload(false);case 34:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleRegister=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var email,login,pass,confPass,errField,response,answer;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:email=_this.state.email;login=_this.state.login;pass=_this.state.pass;confPass=_this.state.confPass;errField=document.querySelector('.regErr');if(!(email.length<6)){_context2.next=9;break;}errField.innerText='Too short email!';_context2.next=36;break;case 9:if(!(login.length<3)){_context2.next=13;break;}errField.innerText='Too short login!';_context2.next=36;break;case 13:if(!(pass!==confPass)){_context2.next=17;break;}errField.innerText='Passwords are not the same!';_context2.next=36;break;case 17:if(email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)){_context2.next=21;break;}errField.innerText='Incorrect email!';_context2.next=36;break;case 21:if(pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)){_context2.next=25;break;}errField.innerText='Incorrect password!';_context2.next=36;break;case 25:errField.innetText='';_context2.next=28;return fetch('/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,login:login,pass:pass})});case 28:response=_context2.sent;_context2.next=31;return response.text();case 31:answer=_context2.sent;errField.innerText=answer;_this.setState({email:'',login:'',pass:'',confPass:''});document.querySelector('.register').style.display='none';document.querySelector('.login-first').style.display='block';case 36:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleSendForgot=function(){var err=document.querySelector('.forgotErr');var email=_this.state.email;if(!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i))err.innerText='Incorrect email!';else{_this.setState({email:''});err.innerText='Password sent!';var response=fetch('/forgot',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email})});}};_this.addTaskMobileForm=function(){var x=window.matchMedia('(max-width: 1023px)');if(x.matches){if(document.querySelector('.newTaskForm').style.display==='block')document.querySelector('.newTaskForm').style.display='none';else document.querySelector('.newTaskForm').style.display='block';}};_this.welcome=function(){if(cookies.get('login'))return'Hey '+cookies.get('login')+'!';else return'Hey!';};return _this;}_createClass(TaskAdd,[{key:\"componentDidMount\",value:function componentDidMount(){this.handlePriorityChange(this.state.priority);var x=window.matchMedia('(max-width: 1023px)');if(x.matches){if(cookies.get('start'))document.querySelector('.startpage-mobile').style.display='none';else cookies.set('start',true);}else if(cookies.get('start'))document.querySelector('.newTaskForm').style.display='block';}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"login-bar\",onClick:this.handleLoginBtn},/*#__PURE__*/React.createElement(\"img\",{className:\"login-img\",src:login,alt:\"login\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"log\"},this.handleBtn())),/*#__PURE__*/React.createElement(\"div\",{className:\"taskAddPanel\"},/*#__PURE__*/React.createElement(\"div\",{className:\"userHeader\"},this.welcome()),/*#__PURE__*/React.createElement(\"span\",{className:\"newTaskHeader\",onClick:this.addTaskMobileForm},\"Add new task\"),/*#__PURE__*/React.createElement(\"div\",{className:\"newTaskForm\"},/*#__PURE__*/React.createElement(\"input\",{value:this.state.title,onChange:this.handleTitleChange,placeholder:\"title\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{value:this.state.date,onChange:this.handleDateChange,placeholder:\"date\",type:\"date\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"priorityChoose\"},/*#__PURE__*/React.createElement(\"span\",null,\"Priority:\"),/*#__PURE__*/React.createElement(\"span\",{className:\"priorityOption\",onClick:this.handlePriorityChange.bind(this,1)},/*#__PURE__*/React.createElement(\"span\",{className:\"priorityCircleGrey\"}),\"Low\"),/*#__PURE__*/React.createElement(\"span\",{className:\"priorityOption\",onClick:this.handlePriorityChange.bind(this,2)},/*#__PURE__*/React.createElement(\"span\",{className:\"priorityCircleBlue\"}),\"Medium\"),/*#__PURE__*/React.createElement(\"span\",{className:\"priorityOption\",onClick:this.handlePriorityChange.bind(this,3)},/*#__PURE__*/React.createElement(\"span\",{className:\"priorityCircleRed\"}),\"High\")),/*#__PURE__*/React.createElement(\"img\",{className:\"addTask\",onClick:this.handleSubmit,src:add,alt:\"add\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"addErr\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Welcome back.\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"It is really nice to see you again!\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.email,onChange:this.handleEmailChange,placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.pass,onChange:this.handlePassChange,placeholder:\"password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleLogin},\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-create\"},\"Don\\u2019t have an account? \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",{onClick:this.handleRegisterBtn},\"Create Account\")),/*#__PURE__*/React.createElement(\"span\",{className:\"login-create\",onClick:this.handleForgotBtn},/*#__PURE__*/React.createElement(\"strong\",null,\"Forgot password?\"),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"span\",{className:\"logErr\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"login-dot\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"register\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Join us!\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"Take control over your tasks.\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.email,onChange:this.handleEmailChange,placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.login,onChange:this.handleLoginChange,placeholder:\"login\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.pass,onChange:this.handlePassChange,placeholder:\"password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.confPass,onChange:this.handlePassRepeatChange,placeholder:\"confirm password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleRegister},\"Register\"),/*#__PURE__*/React.createElement(\"span\",{className:\"regErr\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"login-dot\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"register-hint\"},\"Password must have at least:\",/*#__PURE__*/React.createElement(\"br\",null),\"- 1 letter\",/*#__PURE__*/React.createElement(\"br\",null),\"- 1 number\",/*#__PURE__*/React.createElement(\"br\",null),\"- 6 signs\",/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(\"div\",{className:\"login-first\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Nice to meet you!\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"We are glad to have a new user :)\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Log in\"),\" and create your first task\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.email,onChange:this.handleEmailChange,placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.pass,onChange:this.handlePassChange,placeholder:\"password\",type:\"password\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleLogin},\"Login\"),/*#__PURE__*/React.createElement(\"span\",{className:\"firstLogErr\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"forgot-pass\"},/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Forgot password?\"),/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",value:this.state.email,onChange:this.handleEmailChange,placeholder:\"email\",type:\"text\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleSendForgot},\"Send\"),/*#__PURE__*/React.createElement(\"span\",{className:\"forgotErr\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"startpage-mobile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bgc-dots\"},/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"login-bar\"},/*#__PURE__*/React.createElement(\"img\",{className:\"login-img\",src:login,alt:\"login\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"log\"},\"To\",/*#__PURE__*/React.createElement(\"span\",null,\"Do\"),\"App\")),/*#__PURE__*/React.createElement(\"span\",{className:\"login-title\"},\"Welcome!\"),/*#__PURE__*/React.createElement(\"span\",{className:\"login-subtitle\"},\"Take control over your tasks.\"),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleTryBtn},\"Try without account\"),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleLoginBtn},\"Log in\"),/*#__PURE__*/React.createElement(\"button\",{className:\"login-button\",onClick:this.handleRegisterBtn},\"Sign in\")));}}]);return TaskAdd;}(Component);export default TaskAdd;","map":{"version":3,"sources":["/Users/wojtek/Downloads/todo/client/src/components/TaskAdd.js"],"names":["React","Component","Fragment","Cookies","login","add","cookies","TaskAdd","getDate","time","Date","date","getFullYear","getMonth","state","title","priority","email","pass","confPass","handleBtn","get","updateDatabase","props","tasks","response","fetch","method","headers","body","JSON","stringify","user","handleLoginBtn","remove","window","location","reload","document","querySelector","style","display","handleRegisterBtn","handleForgotBtn","handleTryBtn","handleTitleChange","e","setState","target","value","innerHTML","handleDateChange","handlePriorityChange","backgroundColor","handleEmailChange","handleLoginChange","handlePassChange","handlePassRepeatChange","handleSubmit","data","done","txt","t1","getTime","t2","t3","taskExist","map","task","push","set","name","handleLogin","errField","errFField","length","innerText","match","text","answer","parse","info","handleRegister","innetText","handleSendForgot","err","addTaskMobileForm","x","matchMedia","matches","welcome","bind"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react'\nimport Cookies from 'universal-cookie'\nimport login from './img/log.png'\nimport add from './img/add.png'\nimport './TaskAdd.sass'\n\nconst cookies = new Cookies()\n\nclass TaskAdd extends Component {\n\n    \n\n    getDate = () => {\n        const time = new Date()\n        let date = time.getFullYear() + '-'\n        if (time.getMonth() < 10) date += '0'\n        date += time.getMonth() +1\n        date += '-'\n        if (time.getDate() < 10) date += '0'\n        date += time.getDate()\n        return date\n    }\n\n    state = {\n        title: '',\n        date: this.getDate(),\n        priority: 1,\n        email: '',\n        login: '',\n        pass: '',\n        confPass: '',\n    }\n\n    handleBtn = () => {\n        if (cookies.get('login')) return 'Log out'\n        else return 'Log in'\n    }\n\n    updateDatabase = props => {\n        const tasks = props\n        const response = fetch('/updatetask', {\n          method: 'POST',\n          headers: {\n          'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({tasks: tasks, user: cookies.get('user')}),\n        })\n      }\n\n    handleLoginBtn = () => {\n        if (cookies.get('login')) {\n            cookies.remove('login')\n            cookies.remove('tasks')\n            cookies.remove('user')\n            cookies.remove('start')\n            window.location.reload()\n        }\n\n        else if (document.querySelector('.login').style.display === 'block')\n        {\n            document.querySelector('.login').style.display = 'none'\n            document.querySelector('.register').style.display = 'none'\n            document.querySelector('.login-first').style.display = 'none'\n            document.querySelector('.startpage-mobile').style.display = 'none'\n            document.querySelector('.forgot-pass').style.display = 'none'\n        }\n\n        else {\n            document.querySelector('.login').style.display = 'block'\n            document.querySelector('.register').style.display = 'none'\n            document.querySelector('.login-first').style.display = 'none'\n            document.querySelector('.startpage-mobile').style.display = 'none'\n            document.querySelector('.forgot-pass').style.display = 'none'\n        }\n        \n    }\n\n    handleRegisterBtn = () => {\n        document.querySelector('.login').style.display = 'none'\n        document.querySelector('.register').style.display = 'block'\n        document.querySelector('.login-first').style.display = 'none'\n        document.querySelector('.startpage-mobile').style.display = 'none'\n        document.querySelector('.forgot-pass').style.display = 'none'\n    }\n\n    handleForgotBtn = () => {\n        document.querySelector('.login').style.display = 'none'\n        document.querySelector('.register').style.display = 'none'\n        document.querySelector('.login-first').style.display = 'none'\n        document.querySelector('.startpage-mobile').style.display = 'none'\n        document.querySelector('.forgot-pass').style.display = 'block'\n    }\n\n    handleTryBtn = () => {\n        document.querySelector('.startpage-mobile').style.display = 'none'\n    }\n\n    handleTitleChange = e => {\n        this.setState({\n            title: e.target.value\n        })\n\n        document.querySelector('.addErr').innerHTML = ''\n    }\n\n    handleDateChange = e => {\n        this.setState({\n            date: e.target.value\n        })\n\n        document.querySelector('.addErr').innerHTML = ''\n    }\n\n    handlePriorityChange = props => {\n        document.querySelector('.priorityCircleGrey').style.backgroundColor = 'rgba(0,0,0,0)'\n        document.querySelector('.priorityCircleBlue').style.backgroundColor = 'rgba(0,0,0,0)'\n        document.querySelector('.priorityCircleRed').style.backgroundColor = 'rgba(0,0,0,0)'\n        if (props === 1) document.querySelector('.priorityCircleGrey').style.backgroundColor = '#8D8D8D'\n        else if (props === 2) document.querySelector('.priorityCircleBlue').style.backgroundColor = '#4D57FF'\n        else if (props === 3) document.querySelector('.priorityCircleRed').style.backgroundColor = '#FF5E5A'\n\n        this.setState({\n            priority: props\n        })\n    }\n\n    handleEmailChange = e => {\n        this.setState({\n            email: e.target.value\n        })\n    }\n\n    handleLoginChange = e => {\n        this.setState({\n            login: e.target.value\n        })\n    }\n\n    handlePassChange = e => {\n        this.setState({\n            pass: e.target.value\n        })\n    }\n\n    handlePassRepeatChange = e => {\n        this.setState({\n            confPass: e.target.value\n        })\n    }\n\n    handleSubmit = () => {\n        const data = {\n            title: this.state.title, \n            date: this.state.date, \n            priority: this.state.priority,\n            done: false\n        }\n\n        const txt = document.querySelector('.addErr')\n        txt.innerHTML = ''\n        if (data.title < 3) txt.innerHTML = 'Task must have at least 3 letters!'\n\n        else {\n            const t1 = new Date().getTime()\n            const t2 = new Date(data.date).getTime()\n            const t3 = t2-t1 + 86400000\n            if (t3 < 0) txt.innerHTML = 'Date cannot be from the past!'\n\n            else {\n                let tasks = cookies.get('tasks') || []\n                let taskExist = false\n                tasks.map(task => {\n                    if (task.title === data.title) {\n                        txt.innerHTML = 'Task with such name already exists!'\n                        taskExist = true\n                        }   \n                    })\n                    if (taskExist === false) {\n                        tasks.push(data)\n                        cookies.set('tasks', tasks)\n                        this.updateDatabase(tasks)\n                        this.setState({\n                            name: '',\n                            date: this.getDate(),\n                        })\n                        txt.innerHTML = ''\n                        window.location.reload()\n                    }\n            }\n        }\n    }\n\n    handleLogin = async e => {\n        const email = this.state.email\n        const pass = this.state.pass\n        const errField = document.querySelector('.logErr')\n        const errFField = document.querySelector('.firstLogErr')\n    \n        if (email.length < 6) {\n            errField.innerText = 'Too short email!'\n            errFField.innerText = 'Too short email!'\n        }\n\n        else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) {\n            errField.innerText = 'Incorrect email!'\n            errFField.innerText = 'Incorrect email!'\n        }\n    \n        // else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) {\n            else if (!true) {\n            errField.innerText = 'Incorrect password'\n            errFField.innerText = 'Incorrect password'\n        }\n    \n        else {\n            errField.innerText = ''\n            errFField.innerText = ''\n\n            const response = await fetch('/login', {\n                method: 'POST',\n                headers: {\n                'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ email, pass }),\n            })\n    \n            let answer = await response.text()\n            answer = JSON.parse(answer)\n            errField.innerText = answer.info\n            cookies.set('login', answer.login)\n            cookies.set('user', answer.user)\n\n            this.setState({\n                email: '',\n                pass: '',\n            })\n            \n            if (answer.tasks) cookies.set('tasks', answer.tasks)\n            window.location.reload(false)\n        }\n    }\n\n    handleRegister = async e => {\n        const email = this.state.email\n        const login = this.state.login\n        const pass = this.state.pass\n        const confPass = this.state.confPass\n        const errField = document.querySelector('.regErr')\n    \n        if (email.length < 6) errField.innerText = 'Too short email!'\n\n        else if (login.length < 3) errField.innerText = 'Too short login!'\n\n        else if (pass !== confPass) errField.innerText = 'Passwords are not the same!'\n\n        else if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) errField.innerText = 'Incorrect email!'\n    \n        else if (!pass.match(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/)) errField.innerText = 'Incorrect password!'\n    \n        else {\n            errField.innetText = ''\n            const response = await fetch('/register', {\n                method: 'POST',\n                headers: {\n                'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ email, login, pass }),\n            })\n            const answer = await response.text();\n            errField.innerText = answer\n\n            this.setState({\n                email: '',\n                login: '',\n                pass: '',\n                confPass: '',\n            })\n\n            document.querySelector('.register').style.display = 'none'\n            document.querySelector('.login-first').style.display = 'block'\n        }\n    }   \n\n    handleSendForgot = () => {\n        const err = document.querySelector('.forgotErr')\n        const email = this.state.email\n        if (!email.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i)) err.innerText = 'Incorrect email!'\n        else {\n            this.setState({\n                email: ''\n            })\n            err.innerText = 'Password sent!'\n\n            const response = fetch('/forgot', {\n                method: 'POST',\n                headers: {\n                'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ email }),\n            })\n        }\n    }\n\n    addTaskMobileForm = () => {\n        const x = window.matchMedia('(max-width: 1023px)')\n        if (x.matches) {\n            if (document.querySelector('.newTaskForm').style.display === 'block')\n            document.querySelector('.newTaskForm').style.display = 'none'\n            else document.querySelector('.newTaskForm').style.display = 'block'\n        }\n    }\n\n    componentDidMount() {\n        this.handlePriorityChange(this.state.priority)\n        const x = window.matchMedia('(max-width: 1023px)')\n        if (x.matches) {\n            if (cookies.get('start')) document.querySelector('.startpage-mobile').style.display = 'none'\n            else cookies.set('start', true)\n        }\n        else if (cookies.get('start')) document.querySelector('.newTaskForm').style.display = 'block'\n    }\n\n    welcome = () => {\n        if (cookies.get('login')) return 'Hey ' + cookies.get('login') + '!'\n        else return 'Hey!'\n    }\n    \n    render () {\n    return (\n        <Fragment>\n            <div className='login-bar' onClick={this.handleLoginBtn}>\n                <img className='login-img' src={login} alt='login' />\n                <div className='log'>{this.handleBtn()}</div>\n            </div>\n            <div className='taskAddPanel'>\n                <div className='userHeader'>{this.welcome()}</div>\n                <span className='newTaskHeader' onClick={this.addTaskMobileForm}>Add new task</span>\n                <div className='newTaskForm'>\n                    <input value={this.state.title} onChange={this.handleTitleChange} placeholder='title' type='text' />\n                    <input value={this.state.date} onChange={this.handleDateChange} placeholder='date' type='date' />\n                    <div className='priorityChoose'>\n                    <span>Priority:</span>\n                        <span className='priorityOption' onClick={this.handlePriorityChange.bind(this, 1)}><span className='priorityCircleGrey'></span>Low</span>\n                        <span className='priorityOption' onClick={this.handlePriorityChange.bind(this, 2)}><span className='priorityCircleBlue'></span>Medium</span>\n                        <span className='priorityOption' onClick={this.handlePriorityChange.bind(this, 3)}><span className='priorityCircleRed'></span>High</span>\n                    </div>\n                    <img className='addTask' onClick={this.handleSubmit} src={add} alt='add'/>\n                    <span className='addErr'></span>\n                </div>\n                <div className='login'>\n                    <span className='login-title'>Welcome back.</span>\n                    <span className='login-subtitle'>It is really nice to see you again!</span>\n                    <input className='login-input' value={this.state.email} onChange={this.handleEmailChange} placeholder='email' type='text' />\n                    <input className='login-input' value={this.state.pass} onChange={this.handlePassChange} placeholder='password' type='password' />\n                    <button className='login-button' onClick={this.handleLogin}>Login</button>\n                    <span className='login-create'>Don’t have an account? <br/><strong onClick={this.handleRegisterBtn}>Create Account</strong></span>\n                    <span className='login-create' onClick={this.handleForgotBtn}><strong>Forgot password?</strong><br/></span>\n                    <span className='logErr'></span>\n                    <span className='login-dot'></span>\n                </div>\n                <div className='register'>\n                    <span className='login-title'>Join us!</span>\n                    <span className='login-subtitle'>Take control over your tasks.</span>\n                    <input className='login-input' value={this.state.email} onChange={this.handleEmailChange} placeholder='email' type='text' />\n                    <input className='login-input' value={this.state.login} onChange={this.handleLoginChange} placeholder='login' type='text' />\n                    <input className='login-input' value={this.state.pass} onChange={this.handlePassChange} placeholder='password' type='password' />\n                    <input className='login-input' value={this.state.confPass} onChange={this.handlePassRepeatChange} placeholder='confirm password' type='password' />\n                    <button className='login-button' onClick={this.handleRegister}>Register</button>\n                    <span className='regErr'></span>\n                    <span className='login-dot'></span>\n                    <span className='register-hint'>\n                        Password must have at least:<br/>\n                        - 1 letter<br/>\n                        - 1 number<br/>\n                        - 6 signs<br/>\n                    </span>\n                </div>\n                <div className='login-first'>\n                    <span className='login-title'>Nice to meet you!</span>\n                    <span className='login-subtitle'>We are glad to have a new user :)</span>\n                    <span className='login-subtitle'><strong>Log in</strong> and create your first task</span>\n                    <input className='login-input' value={this.state.email} onChange={this.handleEmailChange} placeholder='email' type='text' />\n                    <input className='login-input' value={this.state.pass} onChange={this.handlePassChange} placeholder='password' type='password' />\n                    <button className='login-button' onClick={this.handleLogin}>Login</button>\n                    <span className='firstLogErr'></span>\n                </div>\n                <div className='forgot-pass'>\n                    <span className='login-title'>Forgot password?</span>\n                    <input className='login-input' value={this.state.email} onChange={this.handleEmailChange} placeholder='email' type='text' />\n                    <button className='login-button' onClick={this.handleSendForgot}>Send</button>\n                    <span className='forgotErr'></span>\n                </div>\n            </div>\n            <div className='startpage-mobile'>\n                <div className='bgc-dots'>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                </div>\n                <div className='login-bar'>\n                    <img className='login-img' src={login} alt='login' />\n                    <div className='log'>To<span>Do</span>App</div>\n                </div>\n                <span className='login-title'>Welcome!</span>\n                <span className='login-subtitle'>Take control over your tasks.</span>\n                <button className='login-button' onClick={this.handleTryBtn}>Try without account</button>\n                <button className='login-button' onClick={this.handleLoginBtn}>Log in</button>\n                <button className='login-button' onClick={this.handleRegisterBtn}>Sign in</button>\n            </div>\n        </Fragment>\n    )}\n}\n\nexport default TaskAdd"]},"metadata":{},"sourceType":"module"}